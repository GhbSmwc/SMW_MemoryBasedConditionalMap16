<html>
	<head>
		<style>
			html {
			background-color: #101010;
			color: rgb(221, 221, 221);
			font-family: sans-serif;
			}
			
			table, th, td {
			border: 1px solid white;
			border-collapse: collapse;
			padding: 0px;
			}
			
			abbr{cursor: help;}
			img.img-hor {
				-moz-transform: scaleX(-1);
				-o-transform: scaleX(-1);
				-webkit-transform: scaleX(-1);
				transform: scaleX(-1);
				filter: FlipH;
				-ms-filter: "FlipH";
			}
			div.CodeBlock {
				overflow: auto;
				width: 1000px;
				height: 500px;
				border: 1px solid white;
				resize: both;
				background-color: #101010;
			}
			pre {
				margin: 0px;
			}
			*.FixedWidth {
				font-family: monospace;
			}
			
			*.NoLineBreak {
				font-family: monospace;
				white-space: pre;
			}
			*.Center {
				text-align: center;
			}
			li {
				padding: 5px;
			}
			input {
				font-family: monospace;
			}
			
			label { display: block; }
		</style>
	</head>
<body style="max-width: 1000px; margin: auto; padding: 15px">
	<a href="../Readme.html#HexBinary">Back</a><br><br>
	
	<p>This tool provides a fast and easy way to handle binary &harr; hex due to most debuggers never had the option to adjust
	the number display base (such as displaying binary instead of hexadecimal). This is useful when checking <kbd>!Freeram_MBCM16_MemoryFlagRAM</kbd>
	on what bit is cleared/set and don't have to go great lengths to use a calculator and switch between radixes.</p>
	
	<table>
	<tr>
	<th>Binary</th>
	<th>Hexadecimal</th>
	</tr>
	<tr>
	<td>%<input type="text" onchange="EnteredBinary()" onkeydown="IncrementDecrementAnyRadix();" id="BinaryInput" value="00000000" data-radixprefix="0b"></td>
	<td rowspan="2">$<input type="text" onchange="EnteredHex()" onkeydown="IncrementDecrementAnyRadix();" id="HexInput" value="00"  data-radixprefix="0x"></td>
	</tr>
	<tr>
	<td>
		<table>
			<tr>
				<td><label><abbr title="Bit 7"><input type="checkbox" id="Bit7" onchange="CheckBoxInput()"></abbr></label></td>
				<td><label><abbr title="Bit 6"><input type="checkbox" id="Bit6" onchange="CheckBoxInput()"></abbr></label></td>
				<td><label><abbr title="Bit 5"><input type="checkbox" id="Bit5" onchange="CheckBoxInput()"></abbr></label></td>
				<td><label><abbr title="Bit 4"><input type="checkbox" id="Bit4" onchange="CheckBoxInput()"></abbr></label></td>
				<td><label><abbr title="Bit 3"><input type="checkbox" id="Bit3" onchange="CheckBoxInput()"></abbr></label></td>
				<td><label><abbr title="Bit 2"><input type="checkbox" id="Bit2" onchange="CheckBoxInput()"></abbr></label></td>
				<td><label><abbr title="Bit 1"><input type="checkbox" id="Bit1" onchange="CheckBoxInput()"></abbr></label></td>
				<td><label><abbr title="Bit 0"><input type="checkbox" id="Bit0" onchange="CheckBoxInput()"></abbr></label></td>
			</tr>
		</table>
		<button onclick="WriteAllBits(1)">Set all</button><button onclick="WriteAllBits(0)">Clear all</button><button onclick="WriteAllBits(2)">Invert</button>
	</td>
	</tr>
	</table>
	
<script>
	function WriteAllBits(State) {
		let LoopCount = 0n
		if (State < 2) {
			for (LoopCount = 0n; LoopCount < 8n; LoopCount++) {
				document.getElementById("Bit" + LoopCount.toString(10)).checked = State
			}
		} else {
			for (LoopCount = 0n; LoopCount < 8n; LoopCount++) {
				let Element = document.getElementById("Bit" + LoopCount.toString(10))
				Element.checked = !Element.checked
			}
		}
		CheckBoxInput()
	}
	function EnteredHex() {
		let HexNumber = 0n
		try {
			HexNumber = BigintClamp(BigInt("0x" + document.getElementById("HexInput").value), 0n, 255n)
		} catch {}
		document.getElementById("HexInput").value = HexNumber.toString(16).padStart(2, "0").toUpperCase()
		document.getElementById("BinaryInput").value = HexNumber.toString(2).padStart(8, "0")
		CheckBoxOutput()
	}
	function EnteredBinary() {
		let BinaryNumber = 0n
		try {
			BinaryNumber = BigintClamp(BigInt("0b" + document.getElementById("BinaryInput").value), 0n, 255n)
		} catch {}
		document.getElementById("BinaryInput").value = BinaryNumber.toString(2).padStart(8, "0")
		document.getElementById("HexInput").value = BinaryNumber.toString(16).padStart(2, "0").toUpperCase()
		CheckBoxOutput()
	}
	function CheckBoxOutput() {
		let BinaryValue = BigInt("0b" + document.getElementById("BinaryInput").value)
		let Quotient = BinaryValue
		let Remainder = 0n
		
		for (let LoopCount = 0n; LoopCount < 8n; LoopCount++) {
			Remainder = (Quotient % 2n)
			Quotient = Quotient/2n
			document.getElementById("Bit" + LoopCount.toString(10)).checked = Boolean(Remainder)
		}
	}
	function CheckBoxInput () {
		let BitInput = [
		document.getElementById("Bit0").checked,
		document.getElementById("Bit1").checked,
		document.getElementById("Bit2").checked,
		document.getElementById("Bit3").checked,
		document.getElementById("Bit4").checked,
		document.getElementById("Bit5").checked,
		document.getElementById("Bit6").checked,
		document.getElementById("Bit7").checked,
		]
		let OutputString = ""
		for (let StringCount = 0n; StringCount < 8n; StringCount++) {
			OutputString += BigInt(BitInput[7n-StringCount])
		}
		document.getElementById("BinaryInput").value = OutputString.padStart(8, "0")
		document.getElementById("HexInput").value = BigInt("0b" + OutputString).toString(16).padStart(2, "0").toUpperCase()
	}
	function IncrementDecrementAnyRadix() {
		let ElementUsed = event.target
		let KeyPressed = event.key
		let RadixPrefix = ElementUsed.dataset.radixprefix
		
		let Radix = 10
		let PadLength = 0
		if (RadixPrefix.toUpperCase() == "0X") {
			Radix = 16
			PadLength = 2
		} else if (RadixPrefix.toUpperCase() == "0B") {
			Radix = 2
			PadLength = 8
		}
		
		let Value = 0n
		try {
			Value = BigInt(RadixPrefix + ElementUsed.value)
		} catch {}
		if (!/(?:ArrowUp|ArrowDown)/.test(KeyPressed)) {
			return
		}
		event.preventDefault()
		if (KeyPressed == "ArrowUp") {
			Value++
		} else {
			Value--
		}
		ElementUsed.value = Value.toString(Radix).padStart(PadLength, "0").toUpperCase()
		ElementUsed.onchange()
	}
	function BigintClamp(num, min, max) {
		//Restrict a number within a specified range, bigInt edition.
		return num <= min ? min : num >= max ? max : num;
	}
</script>